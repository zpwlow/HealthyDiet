<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hstc.dao.DailyEnergyMapper">
    <select id="queryDailyEnergyById" parameterType="com.hstc.pojo.DailyEnergy">
        select username,needed,consume,intake,steps,time
        from daily_energy,user
        where daily_energy.user_id = user.user_id
            and daily_energy.user_id = #{userId}
        <!-- 执行分页查询 -->
        <if test="start !=null and rows != null">
            limit #{start},#{rows}
        </if>
    </select>

    <!-- 查询菜谱总数 -->
    <select id="selectDailyEnergyCount" resultType="Integer">
        select count(*) from daily_energy where user_id = #{userId}
    </select>

    <insert id="addDailyEnergy" parameterType="com.hstc.pojo.DailyEnergy">
        insert into daily_energy
        values (#{user_id},#{needed},#{consume},#{intake},#{steps},#{time});
    </insert>

    <update id="updateDailyEnergy" parameterType="com.hstc.pojo.DailyEnergy">
        update daily_energy
        set needed=#{needed},consume=#{consume},
            intake=#{intake},steps=#{steps}
        where user_id=#{user_id} and time=#{time}
    </update>


</mapper>
